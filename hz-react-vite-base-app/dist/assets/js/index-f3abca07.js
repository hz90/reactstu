import{r as a,aG as Pt,ad as ee,s as te,aC as Ke,ae as ht,aJ as Kt,ab as pt,_ as V,aP as Ue,a8 as Mt,ac as ct,aa as Vt,f as $t,k as mt,bf as Ot,w as Ht,S as At,af as Rt,c as ut,G as Ft,Q as Wt,D as jt,bd as st,be as zt}from"./index-a3c4ad18.js";import{j as Bt,T as Ut,c as Gt,f as Xe,k as Jt,B as Xt,l as Yt,m as Qt,n as qt,o as Zt,D as er,r as tr}from"./index-cf0bcb26.js";import{c as rr,b as nr}from"./index-53e73775.js";var gt=a.createContext(null),Ct=a.createContext(null);function ar(e){return Array.isArray(e)?e:e!==void 0?[e]:[]}function lr(e){var t=e||{},n=t.label,l=t.value,r=t.children,u=l||"value";return{_title:n?[n]:["title","label"],value:u,key:u,children:r||"children"}}function Ye(e){return!e||e.disabled||e.disableCheckbox||e.checkable===!1}function or(e,t){var n=[];function l(r){r.forEach(function(u){var o=u[t.children];o&&(n.push(u[t.value]),l(o))})}return l(e),n}function dt(e){return e==null}var ir={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},cr=function(t,n){var l=Bt(),r=l.prefixCls,u=l.multiple,o=l.searchValue,c=l.toggleOpen,i=l.open,s=l.notFoundContent,d=a.useContext(Ct),E=d.virtual,y=d.listHeight,b=d.listItemHeight,I=d.treeData,D=d.fieldNames,W=d.onSelect,H=d.dropdownMatchSelectWidth,j=d.treeExpandAction,m=a.useContext(gt),T=m.checkable,L=m.checkedKeys,z=m.halfCheckedKeys,$=m.treeExpandedKeys,re=m.treeDefaultExpandAll,ye=m.treeDefaultExpandedKeys,B=m.onTreeExpand,ne=m.treeIcon,J=m.showTreeIcon,Se=m.switcherIcon,be=m.treeLine,xe=m.treeNodeFilterProp,ae=m.loadData,x=m.treeLoadedKeys,le=m.treeMotion,U=m.onTreeLoad,we=m.keyEntities,G=a.useRef(),oe=Pt(function(){return I},[i,I],function(f,k){return k[0]&&f[1]!==k[1]}),ie=a.useMemo(function(){return T?{checked:L,halfChecked:z}:null},[T,L,z]);a.useEffect(function(){if(i&&!u&&L.length){var f;(f=G.current)===null||f===void 0||f.scrollTo({key:L[0]})}},[i]);var ce=String(o).toLowerCase(),Ee=function(k){return ce?String(k[xe]).toLowerCase().includes(ce):!1},X=a.useState(ye),ue=ee(X,2),Y=ue[0],Q=ue[1],Ie=a.useState(null),se=ee(Ie,2),de=se[0],fe=se[1],ke=a.useMemo(function(){return $?te($):o?de:Y},[Y,de,$,o]);a.useEffect(function(){o&&fe(or(I,D))},[o]);var Me=function(k){Q(k),fe(k),B&&B(k)},O=function(k){k.preventDefault()},A=function(k,pe){var R=pe.node;T&&Ye(R)||(W(R.key,{selected:!L.includes(R.key)}),u||c(!1))},Ne=a.useState(null),_=ee(Ne,2),ve=_[0],De=_[1],P=we[ve];if(a.useImperativeHandle(n,function(){var f;return{scrollTo:(f=G.current)===null||f===void 0?void 0:f.scrollTo,onKeyDown:function(pe){var R,Ae=pe.which;switch(Ae){case Ke.UP:case Ke.DOWN:case Ke.LEFT:case Ke.RIGHT:(R=G.current)===null||R===void 0||R.onKeyDown(pe);break;case Ke.ENTER:{if(P){var Re=(P==null?void 0:P.node)||{},Te=Re.selectable,Fe=Re.value;Te!==!1&&A(null,{node:{key:ve},selected:!L.includes(Fe)})}break}case Ke.ESC:c(!1)}},onKeyUp:function(){}}}),oe.length===0)return a.createElement("div",{role:"listbox",className:"".concat(r,"-empty"),onMouseDown:O},s);var he={fieldNames:D};return x&&(he.loadedKeys=x),ke&&(he.expandedKeys=ke),a.createElement("div",{onMouseDown:O},P&&i&&a.createElement("span",{style:ir,"aria-live":"assertive"},P.node.value),a.createElement(Ut,ht({ref:G,focusable:!1,prefixCls:"".concat(r,"-tree"),treeData:oe,height:y,itemHeight:b,virtual:E!==!1&&H!==!1,multiple:u,icon:ne,showIcon:J,switcherIcon:Se,showLine:be,loadData:o?null:ae,motion:le,activeKey:ve,checkable:T,checkStrictly:!0,checkedKeys:ie,selectedKeys:T?[]:L,defaultExpandAll:re},he,{onActiveChange:De,onSelect:A,onCheck:A,onExpand:Me,onLoad:U,filterTreeNode:Ee,expandAction:j})))},yt=a.forwardRef(cr);yt.displayName="OptionList";var qe=function(){return null},St="SHOW_ALL",Ze="SHOW_PARENT",Ge="SHOW_CHILD";function ft(e,t,n,l){var r=new Set(e);return t===Ge?e.filter(function(u){var o=n[u];return!(o&&o.children&&o.children.some(function(c){var i=c.node;return r.has(i[l.value])})&&o.children.every(function(c){var i=c.node;return Ye(i)||r.has(i[l.value])}))}):t===Ze?e.filter(function(u){var o=n[u],c=o?o.parent:null;return!(c&&!Ye(c.node)&&r.has(c.key))}):e}var ur=["children","value"];function bt(e){return Kt(e).map(function(t){if(!a.isValidElement(t)||!t.type)return null;var n=t,l=n.key,r=n.props,u=r.children,o=r.value,c=pt(r,ur),i=V({key:l,value:o},c),s=bt(u);return s.length&&(i.children=s),i}).filter(function(t){return t})}function Qe(e){if(!e)return e;var t=V({},e);return"props"in t||Object.defineProperty(t,"props",{get:function(){return Ue(!1,"New `rc-tree-select` not support return node instance as argument anymore. Please consider to remove `props` access."),t}}),t}function sr(e,t,n,l,r,u){var o=null,c=null;function i(){function s(d){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0",y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return d.map(function(b,I){var D="".concat(E,"-").concat(I),W=b[u.value],H=n.includes(W),j=s(b[u.children]||[],D,H),m=a.createElement(qe,b,j.map(function(L){return L.node}));if(t===W&&(o=m),H){var T={pos:D,node:m,children:j};return y||c.push(T),T}return null}).filter(function(b){return b})}c||(c=[],s(l),c.sort(function(d,E){var y=d.node.props.value,b=E.node.props.value,I=n.indexOf(y),D=n.indexOf(b);return I-D}))}Object.defineProperty(e,"triggerNode",{get:function(){return Ue(!1,"`triggerNode` is deprecated. Please consider decoupling data with node."),i(),o}}),Object.defineProperty(e,"allCheckedNodes",{get:function(){return Ue(!1,"`allCheckedNodes` is deprecated. Please consider decoupling data with node."),i(),r?c:c.map(function(d){var E=d.node;return E})}})}function dr(e,t){var n=t.id,l=t.pId,r=t.rootPId,u={},o=[],c=e.map(function(i){var s=V({},i),d=s[n];return u[d]=s,s.key=s.key||d,s});return c.forEach(function(i){var s=i[l],d=u[s];d&&(d.children=d.children||[],d.children.push(i)),(s===r||!d&&r===null)&&o.push(i)}),o}function fr(e,t,n){return a.useMemo(function(){return e?n?dr(e,V({id:"id",pId:"pId",rootPId:null},n!==!0?n:{})):e:bt(t)},[t,n,e])}const vr=function(e){var t=a.useRef({valueLabels:new Map});return a.useMemo(function(){var n=t.current.valueLabels,l=new Map,r=e.map(function(u){var o,c=u.value,i=(o=u.label)!==null&&o!==void 0?o:n.get(c);return l.set(c,i),V(V({},u),{},{label:i})});return t.current.valueLabels=l,[r]},[e])};function vt(e){var t=a.useRef();t.current=e;var n=a.useCallback(function(){return t.current.apply(t,arguments)},[]);return n}const hr=function(e,t){return a.useMemo(function(){var n=Gt(e,{fieldNames:t,initWrapper:function(r){return V(V({},r),{},{valueEntities:new Map})},processEntity:function(r,u){var o=r.node[t.value];u.valueEntities.set(o,r)}});return n},[e,t])},pr=function(e,t,n,l){return a.useMemo(function(){var r=e.map(function(i){var s=i.value;return s}),u=t.map(function(i){var s=i.value;return s}),o=r.filter(function(i){return!l[i]});if(n){var c=Xe(r,!0,l);r=c.checkedKeys,u=c.halfCheckedKeys}return[Array.from(new Set([].concat(te(o),te(r)))),u]},[e,t,n,l])},mr=function(e,t,n){var l=n.treeNodeFilterProp,r=n.filterTreeNode,u=n.fieldNames,o=u.children;return a.useMemo(function(){if(!t||r===!1)return e;var c;if(typeof r=="function")c=r;else{var i=t.toUpperCase();c=function(E,y){var b=y[l];return String(b).toUpperCase().includes(i)}}function s(d){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return d.map(function(y){var b=y[o],I=E||c(t,Qe(y)),D=s(b||[],I);return I||D.length?V(V({},y),{},Mt({isLeaf:void 0},o,D)):null}).filter(function(y){return y})}return s(e)},[e,t,o,l,r])};var gr=["id","prefixCls","value","defaultValue","onChange","onSelect","onDeselect","searchValue","inputValue","onSearch","autoClearSearchValue","filterTreeNode","treeNodeFilterProp","showCheckedStrategy","treeNodeLabelProp","multiple","treeCheckable","treeCheckStrictly","labelInValue","fieldNames","treeDataSimpleMode","treeData","children","loadData","treeLoadedKeys","onTreeLoad","treeDefaultExpandAll","treeExpandedKeys","treeDefaultExpandedKeys","onTreeExpand","treeExpandAction","virtual","listHeight","listItemHeight","onDropdownVisibleChange","dropdownMatchSelectWidth","treeLine","treeIcon","showTreeIcon","switcherIcon","treeMotion"];function Cr(e){return!e||Vt(e)!=="object"}var yr=a.forwardRef(function(e,t){var n=e.id,l=e.prefixCls,r=l===void 0?"rc-tree-select":l,u=e.value,o=e.defaultValue,c=e.onChange,i=e.onSelect,s=e.onDeselect,d=e.searchValue,E=e.inputValue,y=e.onSearch,b=e.autoClearSearchValue,I=b===void 0?!0:b,D=e.filterTreeNode,W=e.treeNodeFilterProp,H=W===void 0?"value":W,j=e.showCheckedStrategy,m=j===void 0?Ge:j,T=e.treeNodeLabelProp,L=e.multiple,z=e.treeCheckable,$=e.treeCheckStrictly,re=e.labelInValue,ye=e.fieldNames,B=e.treeDataSimpleMode,ne=e.treeData,J=e.children,Se=e.loadData,be=e.treeLoadedKeys,xe=e.onTreeLoad,ae=e.treeDefaultExpandAll,x=e.treeExpandedKeys,le=e.treeDefaultExpandedKeys,U=e.onTreeExpand,we=e.treeExpandAction,G=e.virtual,oe=e.listHeight,ie=oe===void 0?200:oe,ce=e.listItemHeight,Ee=ce===void 0?20:ce,X=e.onDropdownVisibleChange,ue=e.dropdownMatchSelectWidth,Y=ue===void 0?!0:ue,Q=e.treeLine,Ie=e.treeIcon,se=e.showTreeIcon,de=e.switcherIcon,fe=e.treeMotion,ke=pt(e,gr),Me=Jt(n),O=z&&!$,A=z||$,Ne=$||re,_=A||L,ve=ct(o,{value:u}),De=ee(ve,2),P=De[0],he=De[1],f=a.useMemo(function(){return lr(ye)},[JSON.stringify(ye)]),k=ct("",{value:d!==void 0?d:E,postState:function(v){return v||""}}),pe=ee(k,2),R=pe[0],Ae=pe[1],Re=function(v){Ae(v),y==null||y(v)},Te=fr(ne,J,B),Fe=hr(Te,f),M=Fe.keyEntities,me=Fe.valueEntities,et=a.useCallback(function(h){var v=[],p=[];return h.forEach(function(g){me.has(g)?p.push(g):v.push(g)}),{missingRawValues:v,existRawValues:p}},[me]),tt=mr(Te,R,{fieldNames:f,treeNodeFilterProp:H,filterTreeNode:D}),rt=a.useCallback(function(h){if(h){if(T)return h[T];for(var v=f._title,p=0;p<v.length;p+=1){var g=h[v[p]];if(g!==void 0)return g}}},[f,T]),Ve=a.useCallback(function(h){var v=ar(h);return v.map(function(p){return Cr(p)?{value:p}:p})},[]),We=a.useCallback(function(h){var v=Ve(h);return v.map(function(p){var g=p.label,K=p.value,w=p.halfChecked,C,S=me.get(K);if(S){var N;g=(N=g)!==null&&N!==void 0?N:rt(S.node),C=S.node.disabled}else if(g===void 0){var q=Ve(P).find(function($e){return $e.value===K});g=q.label}return{label:g,value:K,halfChecked:w,disabled:C}})},[me,rt,Ve,P]),nt=a.useMemo(function(){return Ve(P)},[Ve,P]),xt=a.useMemo(function(){var h=[],v=[];return nt.forEach(function(p){p.halfChecked?v.push(p):h.push(p)}),[h,v]},[nt]),at=ee(xt,2),Le=at[0],lt=at[1],ot=a.useMemo(function(){return Le.map(function(h){return h.value})},[Le]),wt=pr(Le,lt,O,M),it=ee(wt,2),_e=it[0],je=it[1],Et=a.useMemo(function(){var h=ft(_e,m,M,f),v=h.map(function(w){var C,S,N;return(C=(S=M[w])===null||S===void 0||(N=S.node)===null||N===void 0?void 0:N[f.value])!==null&&C!==void 0?C:w}),p=v.map(function(w){var C=Le.find(function(S){return S.value===w});return{value:w,label:C==null?void 0:C.label}}),g=We(p),K=g[0];return!_&&K&&dt(K.value)&&dt(K.label)?[]:g.map(function(w){var C;return V(V({},w),{},{label:(C=w.label)!==null&&C!==void 0?C:w.value})})},[f,_,_e,Le,We,m,M]),It=vr(Et),kt=ee(It,1),Nt=kt[0],ze=vt(function(h,v,p){var g=We(h);if(he(g),I&&Ae(""),c){var K=h;if(O){var w=ft(h,m,M,f);K=w.map(function(F){var Z=me.get(F);return Z?Z.node[f.value]:F})}var C=v||{triggerValue:void 0,selected:void 0},S=C.triggerValue,N=C.selected,q=K;if($){var $e=lt.filter(function(F){return!K.includes(F.value)});q=[].concat(te(q),te($e))}var Oe=We(q),ge={preValue:Le,triggerValue:S},Pe=!0;($||p==="selection"&&!N)&&(Pe=!1),sr(ge,S,h,Te,Pe,f),A?ge.checked=N:ge.selected=N;var Be=Ne?Oe:Oe.map(function(F){return F.value});c(_?Be:Be[0],Ne?null:Oe.map(function(F){return F.label}),ge)}}),Je=a.useCallback(function(h,v){var p,g=v.selected,K=v.source,w=M[h],C=w==null?void 0:w.node,S=(p=C==null?void 0:C[f.value])!==null&&p!==void 0?p:h;if(!_)ze([S],{selected:!0,triggerValue:S},"option");else{var N=g?[].concat(te(ot),[S]):_e.filter(function(Z){return Z!==S});if(O){var q=et(N),$e=q.missingRawValues,Oe=q.existRawValues,ge=Oe.map(function(Z){return me.get(Z).key}),Pe;if(g){var Be=Xe(ge,!0,M);Pe=Be.checkedKeys}else{var F=Xe(ge,{checked:!1,halfCheckedKeys:je},M);Pe=F.checkedKeys}N=[].concat(te($e),te(Pe.map(function(Z){return M[Z].node[f.value]})))}ze(N,{selected:g,triggerValue:S},K||"option")}g||!_?i==null||i(S,Qe(C)):s==null||s(S,Qe(C))},[et,me,M,f,_,ot,ze,O,i,s,_e,je]),Dt=a.useCallback(function(h){if(X){var v={};Object.defineProperty(v,"documentClickClose",{get:function(){return Ue(!1,"Second param of `onDropdownVisibleChange` has been removed."),!1}}),X(h,v)}},[X]),Tt=vt(function(h,v){var p=h.map(function(g){return g.value});if(v.type==="clear"){ze(p,{},"selection");return}v.values.length&&Je(v.values[0].value,{selected:!1,source:"selection"})}),Lt=a.useMemo(function(){return{virtual:G,dropdownMatchSelectWidth:Y,listHeight:ie,listItemHeight:Ee,treeData:tt,fieldNames:f,onSelect:Je,treeExpandAction:we}},[G,Y,ie,Ee,tt,f,Je,we]),_t=a.useMemo(function(){return{checkable:A,loadData:Se,treeLoadedKeys:be,onTreeLoad:xe,checkedKeys:_e,halfCheckedKeys:je,treeDefaultExpandAll:ae,treeExpandedKeys:x,treeDefaultExpandedKeys:le,onTreeExpand:U,treeIcon:Ie,treeMotion:fe,showTreeIcon:se,switcherIcon:de,treeLine:Q,treeNodeFilterProp:H,keyEntities:M}},[A,Se,be,xe,_e,je,ae,x,le,U,Ie,fe,se,de,Q,H,M]);return a.createElement(Ct.Provider,{value:Lt},a.createElement(gt.Provider,{value:_t},a.createElement(Xt,ht({ref:t},ke,{id:Me,prefixCls:r,mode:_?"multiple":void 0,displayValues:Nt,onDisplayValuesChange:Tt,searchValue:R,onSearch:Re,OptionList:yt,emptyOptions:!Te.length,onDropdownVisibleChange:Dt,dropdownMatchSelectWidth:Y}))))}),He=yr;He.TreeNode=qe;He.SHOW_ALL=St;He.SHOW_PARENT=Ze;He.SHOW_CHILD=Ge;const Sr=e=>{const{componentCls:t,treePrefixCls:n,colorBgElevated:l}=e,r=`.${n}`;return[{[`${t}-dropdown`]:[{padding:`${e.paddingXS}px ${e.paddingXS/2}px`},Yt(n,mt(e,{colorBgContainer:l})),{[r]:{borderRadius:0,"&-list-holder-inner":{alignItems:"stretch",[`${r}-treenode`]:{[`${r}-node-content-wrapper`]:{flex:"auto"}}}}},Qt(`${n}-checkbox`,e),{"&-rtl":{direction:"rtl",[`${r}-switcher${r}-switcher_close`]:{[`${r}-switcher-icon svg`]:{transform:"rotate(90deg)"}}}}]}]};function br(e,t){return $t("TreeSelect",n=>{const l=mt(n,{treePrefixCls:t});return[Sr(l)]})(e)}var xr=globalThis&&globalThis.__rest||function(e,t){var n={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(n[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)t.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(n[l[r]]=e[l[r]]);return n};const wr=(e,t)=>{var{prefixCls:n,size:l,disabled:r,bordered:u=!0,className:o,treeCheckable:c,multiple:i,listHeight:s=256,listItemHeight:d=26,placement:E,notFoundContent:y,switcherIcon:b,treeLine:I,getPopupContainer:D,popupClassName:W,dropdownClassName:H,treeIcon:j=!1,transitionName:m,choiceTransitionName:T="",status:L,showArrow:z,treeExpandAction:$}=e,re=xr(e,["prefixCls","size","disabled","bordered","className","treeCheckable","multiple","listHeight","listItemHeight","placement","notFoundContent","switcherIcon","treeLine","getPopupContainer","popupClassName","dropdownClassName","treeIcon","transitionName","choiceTransitionName","status","showArrow","treeExpandAction"]);const{getPopupContainer:ye,getPrefixCls:B,renderEmpty:ne,direction:J,virtual:Se,dropdownMatchSelectWidth:be}=a.useContext(Ht),xe=a.useContext(At),ae=B(),x=B("select",n),le=B("select-tree",n),U=B("tree-select",n),{compactSize:we,compactItemClassnames:G}=Rt(x,J),[oe,ie]=qt(x),[ce]=br(U,le),Ee=ut(W||H,`${U}-dropdown`,{[`${U}-dropdown-rtl`]:J==="rtl"},ie),X=!!(c||i),ue=z!==void 0?z:re.loading||!X,{status:Y,hasFeedback:Q,isFormItemInput:Ie,feedbackIcon:se}=a.useContext(Ft),de=nr(Y,L),{suffixIcon:fe,removeIcon:ke,clearIcon:Me}=Zt(Object.assign(Object.assign({},re),{multiple:X,showArrow:ue,hasFeedback:Q,feedbackIcon:se,prefixCls:x}));let O;y!==void 0?O=y:O=(ne==null?void 0:ne("Select"))||a.createElement(er,{componentName:"Select"});const A=Wt(re,["suffixIcon","itemIcon","removeIcon","clearIcon","switcherIcon"]),Ne=()=>E!==void 0?E:J==="rtl"?"bottomRight":"bottomLeft",_=we||l||xe,ve=a.useContext(jt),De=r??ve,P=ut(!n&&U,{[`${x}-lg`]:_==="large",[`${x}-sm`]:_==="small",[`${x}-rtl`]:J==="rtl",[`${x}-borderless`]:!u,[`${x}-in-form-item`]:Ie},rr(x,de,Q),G,o,ie),he=a.createElement(He,Object.assign({virtual:Se,dropdownMatchSelectWidth:be,disabled:De},A,{ref:t,prefixCls:x,className:P,listHeight:s,listItemHeight:d,treeCheckable:c&&a.createElement("span",{className:`${x}-tree-checkbox-inner`}),treeLine:!!I,inputIcon:fe,multiple:i,placement:Ne(),removeIcon:ke,clearIcon:Me,switcherIcon:f=>tr(le,b,f,I),showTreeIcon:j,notFoundContent:O,getPopupContainer:D||ye,treeMotion:null,dropdownClassName:Ee,choiceTransitionName:st(ae,"",T),transitionName:st(ae,zt(E),m),showArrow:Q||z,treeExpandAction:$}));return oe(ce(he))},Er=a.forwardRef(wr),Ce=Er,Ir=Ot(Ce);Ce.TreeNode=qe;Ce.SHOW_ALL=St;Ce.SHOW_PARENT=Ze;Ce.SHOW_CHILD=Ge;Ce._InternalPanelDoNotUseOrYouWillBeFired=Ir;const Tr=Ce;export{Tr as T};
